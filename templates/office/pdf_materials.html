<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Material List - {{ ref }}</title>
    <style>
        @page { size: A4; margin: 0; }
        body { font-family: 'Helvetica', Arial, sans-serif; color: #333; padding: 40px; font-size: 13px; }
        .header { display: flex; justify-content: space-between; margin-bottom: 40px; border-bottom: 2px solid #eee; padding-bottom: 20px; }
        .brand h1 { margin: 0; color: {{ config.get('color', '#333') }}; font-size: 24px; }
        .meta { text-align: right; font-size: 12px; color: #666; }
        .badge { background: #333; color: white; padding: 4px 8px; border-radius: 4px; font-weight: bold; font-size: 11px; text-transform: uppercase; }
        
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th { text-align: left; background: #f9f9f9; padding: 10px; border-bottom: 2px solid #ddd; font-size: 11px; text-transform: uppercase; color: #777; }
        td { padding: 12px 10px; border-bottom: 1px solid #eee; }
        .qty-col { text-align: center; font-weight: bold; width: 10%; }
        .check-col { width: 5%; border: 1px solid #ddd; }
        
        .supplier-group { margin-top: 30px; page-break-inside: avoid; }
        .supplier-header { font-size: 14px; font-weight: bold; margin-bottom: 10px; color: {{ config.get('color', '#333') }}; border-bottom: 1px solid #ccc; padding-bottom: 5px; }
    </style>
</head>
<body>
    <div class="header">
        <div class="brand">
            <h1>{{ config.get('company_name', 'Material List') }}</h1>
            <div style="margin-top:5px; font-size:14px;">Project Material Schedule</div>
        </div>
        <div class="meta">
            <div><strong>Ref:</strong> {{ ref }}</div>
            <div><strong>Date:</strong> {{ date }}</div>
            <div style="margin-top:5px;"><span class="badge">Valid for 30 Days</span></div>
        </div>
    </div>

    <h3>Site Address:</h3>
    <p style="font-size: 14px; margin-bottom: 30px;">{{ address }}</p>

    {% if grouped_items %}
        {% for supplier, items in grouped_items.items() %}
        <div class="supplier-group">
            <div class="supplier-header">{{ supplier }}</div>
            <table>
                <thead><tr><th width="5%"></th><th>Item Description</th><th class="qty-col">Qty</th></tr></thead>
                <tbody>
                    {% for item in items %}
                    <tr>
                        <td class="check-col"></td>
                        <td>{{ item.desc }}</td>
                        <td class="qty-col">{{ item.qty }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        {% endfor %}
    {% else %}
        <table>
            <thead><tr><th width="5%"></th><th>Item Description</th><th>Supplier</th><th class="qty-col">Qty</th></tr></thead>
            <tbody>
                {% for item in items %}
                <tr>
                    <td class="check-col"></td>
                    <td>{{ item.desc }}</td>
                    <td>{{ item.supplier or 'Generic' }}</td>
                    <td class="qty-col">{{ item.qty }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    {% endif %}

    <div style="margin-top: 50px; font-size: 11px; color: #999; text-align: center;">
        Generated by Business Better Office Hub
    </div>
</body>
</html>