{% extends "finance/settings_layout.html" %}

{% block settings_content %}
<form method="POST" enctype="multipart/form-data">
    <div class="row g-4">
        
        <div class="col-md-6">
            <div class="card p-4 h-100">
                <h5 class="fw-bold text-secondary mb-4">Banking Details</h5>
                <div class="mb-3">
                    <label class="form-label text-muted small fw-bold">Bank Name</label>
                    <input type="text" name="bank_name" class="form-control" value="{{ settings.get('bank_name', '') }}" placeholder="e.g. Barclays">
                </div>
                <div class="row g-2">
                    <div class="col-6">
                        <label class="form-label text-muted small fw-bold">Account Number</label>
                        <input type="text" name="account_number" class="form-control" value="{{ settings.get('account_number', '') }}">
                    </div>
                    <div class="col-6">
                        <label class="form-label text-muted small fw-bold">Sort Code / Routing</label>
                        <input type="text" name="sort_code" class="form-control" value="{{ settings.get('sort_code', '') }}">
                    </div>
                </div>
                
                <div class="mt-4 pt-3 border-top">
                    <label class="form-label text-muted small fw-bold">Payment QR Code</label>
                    <input type="file" name="payment_qr" class="form-control">
                    {% if settings.get('payment_qr_url') %}
                        <div class="small text-success mt-1"><i class="fas fa-check-circle"></i> QR Code Uploaded</div>
                    {% endif %}
                </div>
            </div>
        </div>

        <div class="col-md-6">
            <div class="card p-4 h-100">
                <h5 class="fw-bold text-secondary mb-4">Financial Terms & Targets</h5>
                
                <div class="p-3 bg-light rounded border mb-4">
                    <h6 class="fw-bold small text-dark mb-3"><i class="fas fa-chart-line me-2"></i>Profit Drivers</h6>
                    <div class="row g-2">
                        <div class="col-6">
                            <label class="form-label text-muted small fw-bold">Material Markup</label>
                            <div class="input-group input-group-sm">
                                <input type="number" name="default_markup" class="form-control" value="{{ settings.get('default_markup', '20') }}">
                                <span class="input-group-text">%</span>
                            </div>
                        </div>
                        <div class="col-6">
                            <label class="form-label text-muted small fw-bold">Net Margin Target</label>
                            <div class="input-group input-group-sm">
                                <input type="number" name="default_profit_margin" class="form-control" value="{{ settings.get('default_profit_margin', '15') }}">
                                <span class="input-group-text">%</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row g-2 mb-3">
    <div class="col-9">
        <label class="form-label text-muted small fw-bold">Payment Terms Text</label>
        <textarea name="payment_terms" class="form-control" rows="2">{{ settings.get('payment_terms', 'Payment due within 14 days.') }}</textarea>
    </div>
    <div class="col-3">
        <label class="form-label text-muted small fw-bold">Days to Pay</label>
        <div class="input-group">
            <input type="number" name="payment_days" class="form-control" value="{{ settings.get('payment_days', '14') }}">
            <span class="input-group-text">Days</span>
        </div>
    </div>
</div>
                
                <div class="mb-0">
                    <label class="form-label text-muted small fw-bold">Invoice Footer Text</label>
                    <textarea name="invoice_footer" class="form-control" rows="2" placeholder="Thank you for your business!">{{ settings.get('invoice_footer', '') }}</textarea>
                </div>
            </div>
        </div>
        
        <div class="col-12 text-end">
             <button type="submit" class="btn btn-primary fw-bold px-4"><i class="fas fa-save me-2"></i> Save Banking Details</button>
        </div>
    </div>
</form>
{% endblock %}