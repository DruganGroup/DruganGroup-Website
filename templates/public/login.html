<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portal Login | Drugan Group</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&family=Montserrat:wght@600;700;800&display=swap" rel="stylesheet">
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="/static/style.css">
    
    <style>
        /* ... (Keep your existing CSS exactly as it was) ... */
        body {
            background-image: linear-gradient(rgba(10,10,15,0.9), rgba(10,10,15,0.95)), url('https://images.unsplash.com/photo-1486406146926-c627a92ad1ab?auto=format&fit=crop&w=1920&q=80');
            background-size: cover;
            background-position: center;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            font-family: 'Inter', sans-serif;
        }
        /* ... (Rest of CSS is fine) ... */
        .login-container { display: flex; max-width: 900px; width: 90%; background: #1a1a1a; border: 1px solid rgba(255,255,255,0.1); border-radius: 20px; overflow: hidden; box-shadow: 0 30px 60px rgba(0,0,0,0.5); }
        .login-form-side { flex: 1; padding: 50px; display: flex; flex-direction: column; justify-content: center; color: #fff; }
        .login-visual-side { flex: 1; background: linear-gradient(135deg, #111 0%, #000 100%); display: flex; flex-direction: column; justify-content: center; align-items: center; padding: 40px; border-left: 1px solid rgba(255,255,255,0.05); text-align: center; }
        .input-group { margin-bottom: 20px; position: relative; }
        .input-group label { display: block; margin-bottom: 8px; color: #aaa; font-size: 0.9rem; }
        .input-group input { width: 100%; padding: 12px 15px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); border-radius: 6px; color: #fff; font-family: 'Inter', sans-serif; transition: 0.3s; box-sizing: border-box; }
        .input-group input:focus { outline: none; border-color: #C5A059; box-shadow: 0 0 10px rgba(197, 160, 89, 0.2); }
        .login-tabs { display: flex; margin-bottom: 30px; border-bottom: 1px solid rgba(255,255,255,0.1); }
        .tab { padding: 10px 20px; color: #666; cursor: pointer; border-bottom: 2px solid transparent; transition: 0.3s; font-weight: 600; }
        .tab.active { color: #C5A059; border-bottom: 2px solid #C5A059; }
        .btn-gold { background: linear-gradient(135deg, #C5A059 0%, #a68545 100%); color: #000; font-weight: bold; border: none; padding: 12px; width: 100%; border-radius: 6px; cursor: pointer; font-size: 1rem; margin-top: 10px; transition: transform 0.1s; }
        .btn-gold:hover { transform: scale(1.02); }
        .flash-error { background: rgba(231, 76, 60, 0.2); color: #e74c3c; padding: 10px; border-radius: 5px; margin-bottom: 20px; border: 1px solid #e74c3c; font-size: 0.9rem; }
        @media(max-width: 768px) { .login-container { flex-direction: column; } .login-visual-side { display: none; } .login-form-side { padding: 30px; } body { height: auto; min-height: 100vh; padding: 20px 0; } }
    </style>
</head>
<body>

    <div style="position: absolute; top: 20px; left: 20px;">
        <a href="/" style="color: #fff; text-decoration: none; font-weight: bold;">← Back to Home</a>
    </div>

    <div class="login-container">
        <div class="login-form-side">
            <div style="margin-bottom: 30px;">
                <span style="font-size: 2rem; font-weight: 800; color: #fff;">DG</span>
                <h2 style="margin-top: 10px; color: #fff;">Welcome Back</h2>
                <p style="color: #888;">Secure access to your project dashboard.</p>
            </div>

            {% with messages = get_flashed_messages() %}
              {% if messages %}
                <div class="flash-error">
                    <i class="fas fa-exclamation-circle"></i> {{ messages[0] }}
                </div>
              {% endif %}
            {% endwith %}

            <div class="login-tabs">
                <div class="tab" onclick="switchTab('client')">Client Portal</div>
                <div class="tab active" onclick="switchTab('staff')">Company Dashboard</div>
            </div>

            <form method="POST" action="/login" id="loginForm">
                <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

                <div class="input-group">
                    <label>Email Address / Username</label>
                    <input type="text" name="email" id="emailInput" placeholder="e.g. admin@drugangroup.co.uk" required>
                </div>
                <div class="input-group">
                    <label>Password</label>
                    <input type="password" name="password" placeholder="••••••••" required>
                </div>
                
                <button type="submit" class="btn-gold">
                    Secure Login <i class="fas fa-lock" style="font-size: 0.8rem; margin-left: 8px;"></i>
                </button>
                
                <div style="margin-top: 20px; text-align: center; font-size: 0.85rem;">
                    <a href="#" style="color: #666; text-decoration: none;">Forgot Password?</a>
                </div>
            </form>
        </div>

        <div class="login-visual-side">
            <div style="background: rgba(255,255,255,0.03); padding: 30px; max-width: 80%; border-radius: 10px; border: 1px solid #333;">
                <i class="fas fa-shield-alt" style="font-size: 3rem; color: #C5A059; margin-bottom: 20px;"></i>
                <h3 style="margin-bottom: 10px; color: #fff;">Bank-Grade Security</h3>
                <p style="font-size: 0.9rem; color: #aaa;">Your project data, invoices, and forensic reports are protected by Enterprise Encryption.</p>
                <br>
                <div style="border-top: 1px solid rgba(255,255,255,0.1); padding-top: 20px;">
                <h4 style="color: #fff; letter-spacing: 2px; margin: 0;">Business Better</h4>
                    <p style="font-size: 0.8rem; color: #666; margin-bottom: 5px;">By Drugan Group</p>
                    </div>
            </div>
        </div>
    </div>

    <script>
        function switchTab(type) {
            const tabs = document.querySelectorAll('.tab');
            const form = document.getElementById('loginForm');
            const emailInput = document.getElementById('emailInput');
            
            // Visual Update
            tabs.forEach(t => t.classList.remove('active'));
            event.target.classList.add('active');

            // Functional Update
            if (type === 'client') {
                console.log("Switching to Client Portal Route");
                form.action = "/portal/login";
                emailInput.placeholder = "e.g. your-email@example.com";
            } else {
                console.log("Switching to Staff Login Route");
                form.action = "/login";
                emailInput.placeholder = "e.g. admin@drugangroup.co.uk";
            }
        }
    </script>
</body>
</html>