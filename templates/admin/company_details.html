{% extends "admin/base.html" %}

{% block title %}{{ company.name }} | Inspection{% endblock %}

{% block styles %}
<style>
    .stat-list li { display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #2a2a2a; color: #aaa; font-size: 0.9rem; }
    .stat-list li:last-child { border-bottom: none; }
    .stat-val { color: #fff; font-weight: 600; }
    
    .activity-tile { background: #252525; border-radius: 10px; padding: 20px; text-align: center; border: 1px solid transparent; transition: 0.3s; }
    .activity-tile:hover { border-color: var(--primary-gold); transform: translateY(-5px); }
    .tile-num { font-size: 1.8rem; font-weight: 700; color: #fff; margin: 10px 0 5px; }
    .tile-label { font-size: 0.75rem; color: #888; text-transform: uppercase; letter-spacing: 1px; }
    
    .btn-gold { background: var(--primary-gold); color: #000; font-weight: 700; border: none; padding: 10px 25px; border-radius: 5px; text-decoration: none; display: inline-block; }
    .btn-gold:hover { background: #fff; color: #000; }
</style>
{% endblock %}

{% block content %}
<div class="mb-4">
    <a href="/super-admin/analytics" class="text-muted text-decoration-none mb-2 d-inline-block hover-gold">
        <i class="fas fa-arrow-left me-2"></i> Back to Analytics
    </a>
    <div class="d-flex justify-content-between align-items-end mt-2">
        <div>
            <h1 class="fw-bold text-white mb-0">{{ company.name }}</h1>
            <div class="text-gold font-monospace">
                {{ company.subdomain }}.tradecore.com 
                <span class="text-muted mx-2">|</span> 
                <span class="badge bg-secondary">{{ company.plan }}</span>
            </div>
        </div>
        <div>
            <a href="/admin/assign-me/{{ company.id }}" class="btn-gold shadow-sm">
                <i class="fas fa-user-secret me-2"></i> Login as Owner
            </a>
        </div>
    </div>
</div>

<div class="row g-4 mb-4">
    <div class="col-md-4">
        <div class="card-dark p-4 h-100">
            <h5 class="text-white mb-3"><i class="fas fa-heartbeat text-danger me-2"></i> System Health</h5>
            <ul class="list-unstyled stat-list mb-0">
                <li><span>DB Rows</span> <span class="stat-val">{{ stats.users + stats.staff + stats.clients + stats.jobs + stats.transactions }}</span></li>
                <li><span>Storage</span> <span class="stat-val">{{ stats.storage_mb }} MB</span></li>
                <li><span>Status</span> <span class="stat-val" style="color: {% if company.status == 'Active' %}#2ecc71{% else %}#e74c3c{% endif %};">{{ company.status }}</span></li>
            </ul>
        </div>
    </div>
    </div>

<div class="card-dark p-4 mb-4">
    <h5 class="text-white mb-4">Operational Breakdown</h5>
    <div class="row g-3">
        <div class="col">
            <div class="activity-tile">
                <i class="fas fa-hard-hat fa-2x" style="color: #e67e22;"></i>
                <div class="tile-num">{{ stats.jobs }}</div>
                <div class="tile-label">Total Jobs</div>
            </div>
        </div>
        </div>
</div>

<div class="card-dark p-4" style="border-color: #e74c3c;">
    <h5 class="text-danger mb-3"><i class="fas fa-exclamation-triangle me-2"></i> Administrative Actions</h5>
    <div class="d-flex gap-3">
        <a href="/admin/suspend/{{ company.id }}" class="btn btn-outline-warning">
            <i class="fas {{ 'fa-play' if company.status == 'Suspended' else 'fa-pause' }} me-2"></i>
            {{ 'Re-activate Account' if company.status == 'Suspended' else 'Suspend Account' }}
        </a>
        <a href="/admin/delete-tenant/{{ company.id }}" class="btn btn-outline-danger" onclick="return confirm('WARNING: DELETE?');">
            <i class="fas fa-trash me-2"></i> Delete Tenant
        </a>
    </div>
</div>
{% endblock %}