{% extends "admin/base.html" %}

{% block title %}Audit Logs | Business Better{% endblock %}

{% block styles %}
<style>
    .table-dark-custom th { color: var(--primary-gold) !important; border-color: #444 !important; }
    .badge-action { padding: 3px 8px; font-size: 0.7rem; font-weight: 700; text-transform: uppercase; color: var(--primary-gold); border: 1px solid var(--primary-gold); border-radius: 4px; }
    .btn-page { border: 1px solid var(--primary-gold); color: var(--primary-gold); padding: 5px 10px; margin: 0 2px; text-decoration: none; border-radius: 4px; }
    .btn-page:hover { background: var(--primary-gold); color: black; }
</style>
{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-end mb-4">
    <h2 class="fw-bold text-white">Audit <span class="text-gold">Trail</span></h2>
</div>

<div class="card-dark shadow-lg">
    <table class="table table-dark-custom table-hover mb-0">
        <thead>
            <tr>
                <th>Time</th>
                <th>Admin</th>
                <th>Action</th>
                <th>Target / Details</th>
                <th>IP</th>
            </tr>
        </thead>
        <tbody>
            {% for log in logs %}
            <tr>
                <td class="small text-muted">{{ log[0] }}</td>
                <td>
                    <div class="fw-bold text-white">{{ log[1] }}</div>
                    {% if log[6] %}<div class="small text-muted">{{ log[6] }}</div>{% endif %}
                </td>
                <td><span class="badge-action">{{ log[2] }}</span></td>
                <td>
                    <div class="text-white small fw-bold">{{ log[3] }}</div>
                    <div class="small text-muted">{{ log[4] }}</div>
                </td>
                <td class="small font-monospace text-muted">{{ log[5] }}</td>
            </tr>
            {% else %}
            <tr><td colspan="5" class="text-center p-5 text-muted">No audit logs found.</td></tr>
            {% endfor %}
        </tbody>
    </table>

    {% if total_pages > 1 %}
    <div class="d-flex justify-content-center p-3">
        {% for p in range(1, total_pages + 1) %}
        <a href="{{ url_for('admin.view_audit_logs', page=p) }}" class="btn-page">{{ p }}</a>
        {% endfor %}
    </div>
    {% endif %}
</div>
{% endblock %}